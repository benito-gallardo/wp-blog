// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8OCCooCO8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@@@@@@@8OCoCCOoccoCOOc..::::::::...:o8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@@@8o::::::...:.....::ccc:.. .  ..:::::cO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@C::...:..    .      .:::..::. ..  ...::ccC@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@C...  ...                ..:. ..  .......:::cC@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@O:..                          ... ..........:::::O@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@8c:...                           ..... .....::::::::o@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@c:...    .                     .    .... ..:...:::::c::O@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@Occ... ..   .                     .. .....:. .::.:.::::cc:C@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@Oc::c....   .  .                     :......::...:...:.:::c:o@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@C:ccc..:..... ..                ....   :::.:...:. :::..:::c::ccO@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@Cc:cc:.::..... ..  ...     .    ....:. .:..:c.:..:c.:c:.::::::cccO@@@@@@@@@@@@@@@@@@
// @@@@@@@@Ooccoc:cc:....... ................:::c:...::.:c..:..c::c::::cccccccO@@@@@@@@@@@@@@@@@
// @@@@@@@8oc:co:ccc::::...  ...::.::..::.:::ccc:ccc:.::..c:.c:.cc:cc::::cccccc8@@@@@@@@@@@@@@@@
// @@@@@@@ooc:oococccc::::......::c::::cc::cc:cccccccc:c:.:c::::.ccccc:ccccccccc@@@@@@@@@@@@@@@@
// @@@@@@Ooo:ooooooccccc::.::::cccc:cc:cccccoccccocc:ccccc::ccc:c.coco::c:cccccco@@@@@@@@@@@@@@@
// @@@@@8oCocoCoooococcc::::::ccccocccccccccccccooococc:ccc::ccc:c.cococ:ccccccccC@@@@@@@@@@@@@@
// @@@@@OooooCoooooocoocccc::ccooooococcoooocoococoocccccco:::cc:cc.cococcccccccoc8@@@@@@@@@@@@@
// @@@@@CoooCCooooooooocccc:cccooooocooooooooooccococooccccoc:cccccc:coooccococcoco@@@@@@@@@@@@@
// @@@@@ooooCCooooocoooooocccoooooooooooooCooooocccccooocccoo::cccccccocoocccccccoc8@@@@@@@@@@@@
// @@@@8ooooCooooCocooooooooooooooooooooocooooooccocccococccoc::ccccc::cccccccoccocC@@@@@@@@@@@@
// @@@@OoocoCooccCCcooCooooooooooooooooooooooooooccccccoccccccc:.cc:c::ccoocccoocooc8@@@@@@@@@@@
// @@@@CoccoCocccCocooCoCoooooooooooooocoocooooooccccccooccocccc::cccc::cccocccoccocC@@@@@@@@@@@
// @@@@occcoooc:coocooCoooooooooooooooo:oo:oooooccc::cc:occocc:cc:ccccc:ccoooocoococc8@@@@@@@@@@
// @@@@occooooc:coocooCCCoooooooooooooocoocooooCoococooooooocc:ccc:::ccccccocoooooco:C@@@@@@@@@@
// @@@@occooooc:coocooCoCooCCCCCCCCoocccccoCOOOOCococcccc:c..c:..::cc:ccoocooocooococc@@@@@@@@@@
// @@@@Cccooooc:ccoccoooCCCCCooccc.::.:c::coCOOOCocoo:cO8o.:oCc:::ccccccccccocoooocoocO@@@@@@@@@
// @@@@Ooooococ::c:cocoCOOOOooc:oOO:.cOoccoCCCOCCocccoocoooccccccccccccccccccooooocoocC@@@@@@@@@
// @@@@Oooooco:::::c::oCOOOOOOCCCCooooocooCCCOOOCoccccoCooooooooooooooccccccccooooo:occ8@@@@@@@@
// @@@@8Ccooco:::.:::oCOOOOCCOOOCCCCCCCCCCOOCCOOOocccccooooCooCooooooocc:ccccococoocoo:O@@@@@@@@
// @@@@@Cccoccc::...cCOOOOOOOOOOOCOOCCCCCOOOOOCCCooccccooooooooooooooocc:::ccccoooo:oocC@@@@@@@@
// @@@@@Ocooocc::::.:CCOOOO8OOOOOOOOCCOOCOOOOCCCCCooc:coCCCCCCCCCCoooooc::::cccoccocooco8@@@@@@@
// @@@@@Occoocc::::.:oCOOO8888OOOOOOOOOOOOCooCOOOOCCooccoCOOCCCCCCoooooc:..::::cccoococoO@@@@@@@
// @@@@@8ocooccc::::.:OOOO8O88OOOOOOOOOOOOCOOCCOOCCCc:ccoCCOOCCCCCCooocc:...:::ccooocCccC@@@@@@@
// @@@@@@ooooocc::::..CCCOO888O88OOOOOOOOOCCCo::CCoo:coooooCOOCCCCoooccc....:::ccooocCcco8@@@@@@
// @@@@@@Ooococc:.::c.cOCCOOO888888OOOOOOOOCCOOOCooooc:cooooooCCCooococc..: :c:ccooocCocoO@@@@@@
// @@@@@@8oocccc::.cc  CCCCOOOO88OOOOOOOOOOOCCoooooCoc::::::cccooooocccc..:.:::ccooocCoocO@@@@@@
// @@@@@@@Coooocc::cc  :OCCOOOOOOOOOOOOCooooooooCoccooocc:.::cc:coccccc: .:.:::c:ooocooocO@@@@@@
// @@@@@@@OoCooc:::cc   oOCCCCOOOOOOOCCCCooooOOCoCCooc::c::.::cccccc::c. .:.:::ccooocooocO@@@@@@
// @@@@@@@@CoCcoc::cc    CCCCCOCOOOOCooooc:ccc:coocccooccccc:::cocc::c:  .:.::::cococcoocO@@@@@@
// @@@@@@@@OoCocccccc.    oOCCCCCCOOCocc::cCOOCCooc:::::cccccc::::::::   .:.:ccccococcocoO@@@@@@
// @@@@@@@@8oooooc:co.     cOOoCoCCCCoccoCCCOOCocc:::cooCCocc:::.:::.    .c:::occooocco:cO@@@@@@
// @@@@@@@@8oCooooc:oc       oOoooooooccooCCCCCCoo:::::::cc::::..:.      .c::coc:oooccocc8@@@@@@
// @@@@@@@@@ooCCCo::oo        :oCooooooooooocooocoooooccc:::::.::. .     :oc:coc:oooccocc8@@@@@@
// @@@@@@@@@CcoCCoc:co.       ::cocooooccccooooooooooooooc::::::....     :occcc::ooCccoccO@@@@@@
// @@@@@@@@@OcoCCCc:cC:       .:cooocccooocooooooooooccccc:::::...:.    .cocccoccoooc:Ccc@@@@@@@
// @@@@@@@@@8ccCCCoccoc       .ccooCoooccoooooooooccccccccccc::::::.    .coooccccooCc:oco@@@@@@@
// @@@@@@@@@@ocCOOCccoo.      .:ccoCCCCCooccccc:::::::ccccoocccc:c:.    .ccoocccccooocooc8@@@@@@
// @@@@@@@@@@CcoCOOocoC:      .:ccooCOOCCCCooooooooooooooooocccc:c:.    :o:ococcccooc:oocO@@@@@@
// @@@@@@@@@@OoooCCCcooc. .   .::cooCCOCCCCCCCCCCCCCCCoooooccoccc:...   :o:ococccoooc:oCcO@@@@@@
// @@@@@@@@@@@CcoCCOccoo:. .  .:::cooCCCCCCCCCCCCCCCCCooooocccc:::...   cc:ccocccoCcc:oocO@@@@@@
// 88@@@@@@@@@OooCCOocooo.. .  :::ccoCCCCOCCOOCCCCCCCoooooccccc::.....  cc:co:cccoocc:oo:O@@@@@@
// ..       ..:ooooOCccoCc.. ...::ccooCCCCCOOCCCCCCCCooooccccc:::.......cc:cococcCocc:oCcoc:coCO
// ......::::c coooOOoocCC:.. .::::ccoooCCCOOOOOCCCooooooccccc::::.::..:c::cococoCocccoCooc....:
// c::::::::..  oooCOCooooo:.. .::::ccoooCCCCCCCCCCCCCCCoccccc:::::::..cc::occocooocccoCccc:::.:
// : co::::...  .ocCCOCcoooc:...:::c:ccooooCCCCCCCooCooooccccc:::::::.:cc:co:oocoCcoocoCocc:..::
// coc::..       .coCCCoooCo:c...:::::ccoooCCCCCoooooooooocccc::::::c:::::cc:oocoocoocoCoc:::..:
// cc:.....:c:    .oooCCoCCCc::..:::::cccooooooooooooooooooooc::::::c:::cccccCooooocoooCo:.::...
// :::....ccco:    :CooOooCCo:::.:cccccccooooooooooooooooooCoc::::::cc:::cc:coooooooooCCo:..::.:
// :::...cccco.    .cCoCOcoOCc.:..:ccccccoooCooooooooooooCOOoc:::cccc::::oc:coooooooooCCo:.:.:. 
// :..::ccccco:  .. .:oooCoCCo:::::ccccccooooooooCoCCCCCOO8Oocc:::ccccc:co:.cooCooocooOOC..... .
// :::.:ccccccc... ..c:oooCcoCc::.::cccccoooooocoooCCCCCOOOCoooCoc::c:ccco..cooCooooooCCo...  .:
// :...::ccccccc.: ..:::cooooCCcc::ccooooooCCCocccooooooCCCCoooCCCocccccc: .oooCooCoooCOo... ...
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       BOOM      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

////////////////////////////////////////////////////////////////////////////////////////////////
//Debounce: Limits the rate at which a function can fire ///////////////////////////////////////
//
//**** Set function ********** /////////////////////////////////////////////////////////////////
//  var myEfficientFn = debounce(function() {
//     console.log($(window).width())
//  }, 250);
//
//***** Call function *****/////////////////////////////////////////////////////////////////////
// window.addEventListener('resize', myEfficientFn);
////////////////////////////////////////////////////////////////////////////////////////////////
function debounce(func, wait, immediate) {
  var timeout;
  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
  };
};

////////////////////////////////////////////////////////////////////////////////////////////////
//pubsubs: publishâ€“subscribe pattern////////////////////////////////////////////////////////////
//
//********* Publish from function ***********///////////////////////////////////////////////////
// function myFunc (){
//    some code;
//    pubsubs.emit('deviceChanged', args);
//  };
//********* Subcribe to modual *************////////////////////////////////////////////////////
// var pubsubs = {
// pubsubs.on('deviceChanged', logToConsole);
// function logToConsole(args){
//   console.log(args)
// }
////////////////////////////////////////////////////////////////////////////////////////////////
var pubsub = {
  pubsub: {},
  on: function (eventName, fn) {
    this.pubsub[eventName] = this.pubsub[eventName] || [];
    this.pubsub[eventName].push(fn);
  },
  off: function(eventName, fn) {
    if (this.pubsub[eventName]) {
      for (var i = 0; i < this.pubsub[eventName].length; i++) {
        if (this.pubsub[eventName][i] === fn) {
          this.pubsub[eventName].splice(i, 1);
          break;
        }
      };
    }
  },
  emit: function (eventName, data) {
    if (this.pubsub[eventName]) {
      this.pubsub[eventName].forEach(function(fn) {
        fn(data);
      });
    }
  }
};
////////////////////////////////////////////////////////////////////////////////////////////////
//Make a group of divs the same height based on the tallest one 
//Example:
//makeSameHieght('.heightAdjust');
////////////////////////////////////////////////////////////////////////////////////////////////
function makeSameHieght(element) {
  $(element).css('min-height', 'initial');
  var highest = 0;
  $(element).each(function() {
    if ($(this).outerHeight() >= highest) {
      highest = $(this).outerHeight();
      $(element).css('min-height', highest + 'px');
      highest = 0;
    }
  })
};


//Setting data attr on body for devices type on resize
(function($){
  var status='derp';

  //cache DOM
  var $body =  $('body');
  var windowWidth;
  resize();
 
  function resize(){
    windowWidth = $(window).width();
    setDataAttr(windowWidth);
  }
  var resizeB = debounce(function() {
    resize();
  }, 200);

 function setDataAttr(size){
  if (size < 601 && status != 'mobile'){
    status = 'mobile';
    render();
  }
  else if( size < 993 && size > 600 && status != 'portrait-tablet' ){
    status = 'portrait-tablet';
    render();
  }
  else if (size > 992 && size < 1201 && status != 'laptop') {
    status = "laptop"
    render();
  }
  else if (size > 1200 && status != 'desktop') {
    status = "desktop"
    render();
  }
 }
  function render(){
    $body.attr('data-device', status);
    pubsub.emit('deviceChanged', status);
  }

window.addEventListener('resize', resizeB);
})(jQuery);//isMobile


(function($){
  var objSelf = {
    init: function(){
      this.cacheDom();
      this.setImg();
      this.checkDevice();
      this.render();
    },
    cacheDom: function(){
      this.$body = $('body');
      this.$img = $('[data-lg-img]');

      
    },
    setImg: function(){
      objSelf.$img.each(function(){
        $(this).attr('data-sm-img',$(this).attr('src'));
      });
    },
    checkDevice: function(){
      var deviceCheck = objSelf.$body.attr('data-device');
      if(deviceCheck ==='mobile' || deviceCheck === 'portrait-tablet'){
        objSelf.mobileImg();
      }
      else {
        objSelf.desktopImg();
      }
    },
    mobileImg: function(){
      objSelf.$img.each(function(){
        $(this).attr('src',$(this).attr('data-sm-img'))
      });
    },
    desktopImg: function(){
      objSelf.$img.each(function(){
        $(this).attr('src',$(this).attr('data-lg-img'))
      });
    },
    render: function(){
     pubsub.on('deviceChanged', objSelf.checkDevice);
    }
  };
  if($('[data-lg-img]')){
    objSelf.init();
  }
  
})(jQuery);
